<div class="container mt-5">
  <div class="row mb-4">
    <div class="col">
      <h1>Course Details</h1>
      <a routerLink="/courses" class="btn btn-primary">
        ‚Üê Back to Course List
      </a>
    </div>
  </div>

  <div *ngIf="course">
    <div class="row mb-3">
      <div class="col-md-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Course Name</h5>
            <p class="card-text">{{ course.courseName }}</p>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Course Code</h5>
            <p class="card-text">{{ course.courseCode }}</p>
          </div>
        </div>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Credits</h5>
            <p class="card-text">{{ course.credits }}</p>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Teacher</h5>
            <p class="card-text">{{ course.teachers.join(', ') }}</p>
          </div>
        </div>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-12">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Categories</h5>
            <p class="card-text">
              <span *ngFor="let category of course.categories" class="badge bg-secondary me-2">{{ category }}</span>
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Branch</h5>
            <p class="card-text">{{ course.branchName }}</p>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Major</h5>
            <p class="card-text">{{ course.majorName }}</p>
          </div>
        </div>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Seat Limit</h5>
            <p class="card-text">{{ course.seatLimit }}</p>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Location</h5>
            <p class="card-text">{{ course.locationName }}</p>
          </div>
        </div>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-12">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Course Program</h5>
            <p class="card-text">{{ course.program }}</p>
          </div>
        </div>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-12">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Bibliography</h5>
            <p class="card-text">{{ course.bibliography }}</p>
          </div>
        </div>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-12">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">List of Professors</h5>
            <ul>
              <li *ngFor="let teacher of course.teachers">{{ teacher }}</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-12">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Reviews</h5>
            <div *ngFor="let review of reviews" class="mb-4">
              <div class="card mb-3">
                <div class="card-body">
                  <h5><strong>{{ review.author_name }}</strong></h5>
                  <p>{{ review.comment }}</p>
                  <div class="d-flex justify-content-around">
                    <div class="w-25 me-2">
                      <p>Theory:</p>
                      <div class="progress mb-2">
                        <div class="progress-bar bg-success" role="progressbar" [style.width.%]="review.theory * 20" aria-valuenow="review.theory" aria-valuemin="0" aria-valuemax="5">{{ review.theory }}/5</div>
                      </div>
                    </div>
                    <div class="w-25 me-2">
                      <p>Practice:</p>
                      <div class="progress mb-2">
                        <div class="progress-bar bg-info" role="progressbar" [style.width.%]="review.practice * 20" aria-valuenow="review.practice" aria-valuemin="0" aria-valuemax="5">{{ review.practice }}/5</div>
                      </div>
                    </div>
                    <div class="w-25 me-2">
                      <p>Subject:</p>
                      <div class="progress mb-2">
                        <div class="progress-bar bg-warning" role="progressbar" [style.width.%]="review.subject * 20" aria-valuenow="review.subject" aria-valuemin="0" aria-valuemax="5">{{ review.subject }}/5</div>
                      </div>
                    </div>
                    <div class="w-25">
                      <p>Personal Appreciation:</p>
                      <div class="progress mb-2">
                        <div class="progress-bar bg-danger" role="progressbar" [style.width.%]="review.personalAppreciation * 20" aria-valuenow="review.personalAppreciation" aria-valuemin="0" aria-valuemax="5">{{ review.personalAppreciation }}/5</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    

    <div class="row mb-3">
      <div class="col-md-12">
        <button class="btn btn-success" (click)="registerForCourse()">Register for this Course</button>
      </div>
    </div>
  </div>
</div>

<!-- Toasts -->
<div class="toast-container position-fixed top-0 end-0 p-3">
  <div class="toast align-items-center text-white bg-danger border-0" id="courseToast" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body">
        <!-- Message content will be inserted dynamically -->
      </div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Fermer"></button>
    </div>
  </div>
</div>
